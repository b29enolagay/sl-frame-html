<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<style>
html,body{
    margin:0;
    padding:0;
    overflow:hidden;
    background:black;
    width:100%;
    height:100%;
}

/* 外枠（フレーム全体） */
#outer{
    width:100%;
    height:100%;
    display:flex;
    justify-content:center;
    align-items:center;
    background:black;
}

/* 内枠（アスペクト比固定） */
#inner{
    background-position:center;
    background-repeat:no-repeat;
    background-size:contain;
    background-color:black;
}
</style>
</head>
<body>
<div id="outer">
    <div id="inner"></div>
</div>

<script>
const params = new URLSearchParams(window.location.search);
let src = params.get("src");

// Dropbox ?dl=0 → ?raw=1
if(src){
    src = src.replace("?dl=0", "?raw=1");
}

// 画像読み込みして縦横比を取得
const img = new Image();
img.onload = function(){
    const ratio = img.width / img.height;

    // outer のサイズを取得
    const outer = document.getElementById("outer");
    const w = outer.clientWidth;
    const h = outer.clientHeight;

    const outerRatio = w / h;

    const inner = document.getElementById("inner");

    // 比率に合わせて inner のサイズを決定
    if(ratio > outerRatio){
        // 横長 → 横を合わせる
        inner.style.width = "100%";
        inner.style.height = (100 / ratio) + "vw";
    }else{
        // 縦長 → 縦を合わせる
        inner.style.height = "100%";
        inner.style.width = (100 * ratio) + "vh";
    }

    inner.style.backgroundImage = `url('${src}')`;
};

img.src = src;
</script>
</body>
</html>
